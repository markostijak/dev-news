<button mat-icon-button [matMenuTriggerFor]="menu">
  <img class="avatar" [src]="user.picture || 'assets/icons/user.png'" [alt]="user.username">
</button>
<mat-menu #menu="matMenu">
  <div class="user-info-container" fxLayout="row" fxLayoutGap="10px">
    <div class="user-info" fxFlex="40px">
      <img class="user-image" [src]="user.picture || 'assets/icons/user.png'" [alt]="user.username"/>
    </div>
    <div class="user-info" fxFlex="100%">
      <div class="name">{{user.firstName + ' ' + user.lastName}}</div>
      <div class="email">{{user.email}}</div>
    </div>
  </div>
  <mat-nav-list>
    <mat-divider></mat-divider>
    <h3 mat-subheader>My stuff</h3>
    <a class="menu-item" mat-list-item [routerLink]="['u', user.username]">
      <mat-icon mat-list-icon>person</mat-icon>
      <span mat-line>My profile</span>
    </a>
    <a class="menu-item" mat-list-item [routerLink]="['u', user.username, 'settings']">
      <mat-icon mat-list-icon>settings</mat-icon>
      <span mat-line>User settings</span>
    </a>
    <mat-divider class="mt-10"></mat-divider>
    <h3 mat-subheader>Actions</h3>
    <mat-list-item class="menu-item" (click)="showDialog('post')">
      <mat-icon mat-list-icon>description</mat-icon>
      <span mat-line>Create post</span>
    </mat-list-item>
    <mat-list-item class="menu-item" (click)="showDialog('community')">
      <mat-icon mat-list-icon>extension</mat-icon>
      <span mat-line>Create community</span>
    </mat-list-item>
    <mat-divider class="mt-10 mb-10"></mat-divider>
    <mat-list-item class="menu-item" (click)="logout()">
      <mat-icon mat-list-icon>exit_to_app</mat-icon>
      <span mat-line>Log out</span>
    </mat-list-item>
  </mat-nav-list>
</mat-menu>
